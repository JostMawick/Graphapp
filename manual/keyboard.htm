<HTML>
<HEAD>
 <TITLE>GraphApp Reference Manual: Keyboard Events</TITLE>
</HEAD>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H2><A NAME="keyboard">Responding to Keyboard Events</A></H2>
<P>
<H3>OBJECTS</H3>
<P>
<PRE>
  typedef void (*KeyFunc)(Control *c, unsigned long key);
</PRE>
<P>
<H3>FUNCTIONS</H3>
<P>
<PRE>
  void  on_control_key_down  (Control *c, KeyFunc key_down);
  void  on_control_key_action(Control *c, KeyFunc key_action);
</PRE>
<P>
<H3>CONSTANTS</H3>
<P>
<PRE>
  enum {
    BELL  = 0x07,           /* ASCII bell character */
    BKSP  = 0x08,           /* ASCII backspace */
    VTAB  = 0x0B,           /* ASCII vertical tab */
    FF    = 0x0C,           /* ASCII form-feed */
    ESC   = 0x1B            /* ASCII escape character */
  };

  enum {
    INS   = 0x2041,         /* Insert key */
    DEL   = 0x2326,         /* Delete key */
    HOME  = 0x21B8,         /* Home key */
    END   = 0x2198,         /* End key */
    PGUP  = 0x21DE,         /* Page Up key */
    PGDN  = 0x21DF,         /* Page Down key */
    ENTER = 0x2324          /* Numerical keypad Enter key */
  };

  enum {
    LEFT  = 0x2190,         /* Left arrow key */
    UP    = 0x2191,         /* Up arrow key */
    RIGHT = 0x2192,         /* Right arrow key */
    DOWN  = 0x2193          /* Down arrow key */
  };

  enum {
    F1    = 0x276C,         /* Function keys */
    F2    = 0x276D,
    F3    = 0x276E,
    F4    = 0x276F,
    F5    = 0x2770,
    F6    = 0x2771,
    F7    = 0x2772,
    F8    = 0x2773,
    F9    = 0x2774,
    F10   = 0x2775
  };

  enum {
    CONTROL = 0x20000000L,  /* Modifier bit-fields */
    SHIFT   = 0x10000000L
  };
</PRE>
<P>
<H3>NOTES</H3>
<P>
Keyboard events can be caught using the <B>on_control_key_down</B> and <B>on_control_key_action</B> functions. The first function sets the call-back used to handle normal Unicode keys, including the return and escape keys. Keys which do not produce Unicode values are sent to the second function's call-back, such as when the user presses an arrow key or a function key.
<P>
Keyboard call-backs can be associated with controls. Typically you should not use these functions with pre-defined controls such as buttons, fields etc, only with custom-designed controls, since the pre-defined controls already make use of their own keyboard call-backs.
<P>
The call-back specified by the <B>on_control_key_down</B> function may be passed any of the following keys:
<P>
<UL>
<LI>Any normal ASCII key value which can generated by the keyboard.
<LI>The value <B>ESC</B> is defined as the Escape key.
<LI>The value <B>BKSP</B> is defined as the Backspace key.
<LI>A newline character <TT>'\n'</TT> is sent when the main keyboard Enter or Return key is pressed (but not the numeric keypad Enter key).
<LI>Any Unicode value which the keyboard may generate.
</UL>
<P>
To see other keyboard events, the <B>on_control_key_action</B> function associates a call-back with a control or window. That call-back can see the following key values:
<P>
<UL>
<LI><B>INS, DEL, HOME, END, PGUP, PGDN</B> which correspond to the keys Insert, Delete, Home, End, Page Up and Page Down.
<LI><B>ENTER</B> which is the Enter key on a numeric keypad. Note that this value is different from the normal ASCII return key, <TT>0x0A</TT> or <TT>'\n'</TT> (newline).
<LI><B>LEFT, UP, RIGHT, DOWN</B> which are the arrow keys.
<LI><B>F1, F2, F3, F4, F5, F6, F7, F8, F9, F10</B> which correspond to the Function keys on a keyboard. Note that there is currently no provision for Function keys higher than <B>F10</B>.
<LI>Keys modified by holding down the <B>CONTROL</B> key, or the other keys in this list modified by <B>CONTROL</B> and/or <B>SHIFT</B> being held down.</LI>
</UL>
<P>
These keys should not be handled by same call-back as ordinary <B>key_down</B> events, since a Unicode keyboard may be able to generate the same value explicitly, and then confusion would exist about whether the user pressed an arrow key, or generated a Unicode value which happens to map to the same number.
<P>
</BODY>
</HTML>
